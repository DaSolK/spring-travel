
# Chapter 01 정리  
  
1-1 초난감 DAO
----------------------------------------------------------------------------
UserDao code : DB connect, sql statement, query 실행, query 실행결과 반환,  DB disconnect(자원정리), 예외처리 코드, 테스트코드 모두 포함
=> 데이터 등록, 조회 정상적으로 수행 됨

1-2 DAO 분리
---------------------------------------------------------------------------
1-1의 UserDao 코드가 정상적으로 동작하지만 분리와 확장을 고려한 설계가 아니다.
* 관심이 같은 것 끼리는 하나의 객체 또는 친한 객체(상속관계, 포함관계등)로 모이게 하고, 관심이 다른 것들은 가능한 다 따로 떨어져서 서로 영향을 주지 않도록 분리해야한다. (Separation of Concerns)
* 결합도는 낮추고, 응집도는 높히는 작업

1-1의 UserDao코드에 묶여있는 여러가지 관심사항
1. DB connection
2. sql statement
3. DB disconnection

* 먼저 DB connection을 extract method를 통해 refactoring 하자.
* UserDao 코드에 DB connection 얻어오는 부분을 getConnection 메소드로 추출
=> 관심에 따라 코드를 분리해 놓았기 때문에 한가지 관심에 대한 변경이 일어날 경우 그 관심이 집중되는 부분의 코드만 수정하면 된다.

UserDao 코드를 다른 사용자에게 제공하지 않으면서 getConnection 메소드만 수정하게 할 수 없을까?
* UserDao를 getConnection abstract 메소드를 가지는 abstract class로 만들고, 이를 상속하는 NUserDao, DUserDao류의 class를 만들어 사용한다.

**슈퍼클래스에 기본적인 로직의 흐름을 만들고, 그 기능의 일부를 추상메소드나 오버라이딩 가능한 메소드 등으로 만든 뒤 서브클래스에서 이런 메소드를 필요에 맞게 구현해서 사용하도록 하는 방법을 template method pattern 이라고 한다.**
 (변하지 않는 기능은 슈퍼클래스에, 자주 변경되어 확장할 기능은 서브클래스에 만든다. 슈퍼클래스에서 미리 추상 메소드 또는 오버라이드 가능한 메소드를 정의해 두고, 이를 활용해 코드의 기본 알고리즘을 담고 있는 템플릿 메소드를 만든다. 슈퍼클래스에서 디폴트 기능을 정의해두거나 비웠다가 서브클래스에서 선택적으로 오버라이드 할 수 있도록 만들어둔 메소드를 hock method 라고 한다.)
**서브클래스에서 구체적인 오브젝트 생성 방법을 결정하게 하는 방법을 factory method pattern 이라고 한다.**
(서브클래스에서 오브젝트 생성 방법과 클래스를 결정할 수 있도록 미리 정의해둔 메소드를 팩토리 메소드라고 하고, 이 방식을 통해 오브젝트 생성 방법을 나머지 로직, 즉 슈퍼클래스의 기본 코드에서 독립시키는 방법을 팩토리 메소드 패턴이라고 한다.)
=> 68p 그림1-2가 위 두 패턴이 적용된 클래스 다이어그램을 보여주고 있다.

cf) 디자인 패턴
디자인 패턴은 소프트웨어 설계 시 특정 상황에서 자주 만나는 문제를 해결하기 위해 사용할 수 있는 재사용 가능한 솔루션, 패턴의 설계 구조를 보면 대부분 비슷한데, 그 이유는 객체지향적인 설계로부터 문제를 해결하기 위해 적용할 수 있는 확장성 추구 방법이 대부분 클래스 상속, 오브젝트 합성 이라는 두가지 구조로 정리되기 때문이다. 패턴에서 핵심은 패턴의 목적 또는 의도이다. 패턴을 적용할 상황, 해결해야 할 문제, 솔루션의 구조와 각 요소의 역할과 함께 핵심 의도가 무엇인지 기억해둬야 한다.

1-2 DAO 분리 하였지만 남아있는 문제점?
=> 상속관계는 여전히 두 가지 다른 관심사에 대해 긴밀한 결합을 허용한다
ex) 서브클래스는 슈퍼클래스의 기능을 직접 사용할 수 있음, 클래스는 이중상속을 허용하지 않기 때문에 추후 다른목적으로 UserDao에 상속 적용하기 어렵다.

1-3 DAO의 확장
---------------------------------------------------------------------------