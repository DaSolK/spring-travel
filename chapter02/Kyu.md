
# Chapter 02 정리  

2-1 UserDaoTest 다시보기
----------------------------------------------------------------------------

테스트란 내가 예상하고 의도했던 대로 코드가 정확히 동작하는지를 확인해서 만든 코드를 확신할 수 있게 해주는 작업이다.

기존 테스트코드의 특징
 * main 메소드를 이용해 쉽게 테스트 수행 가능
 * 테스트할 대상인 UserDao를 직접 호출해서 사용함
 * 테스트에 사용할 값을 직접 코드에서 만들어 줌
 * 테스트 결과를 콘솔을 통해 확인함
 
 웹을 통한 DAO 테스트 방법의 문제점
 * 서비스 계층, MVC 프리젠테이션 계층 등등을 테스트 결과가 확인가능하게 대충이라도 만들어야 함
 * 테스트 실행과정이 너무 번거로움
 * 에러가 발생했을때 테스트하고자 한 코드에서 문제가 발생했는지, 다른 코드에서 문제가 발생했는지 확인하기 번거로움
 
 => 테스트하고 싶었던 건 UserDao였는데 다른 계층의 코드와 컴포넌트 서버의 설정 상태 까지 모두 테스트에 영향을 줄 수 있기 때문에 이런 방식으로 테스트하는 것은 번거롭고, 오류가 있을때도 빠르게 대응하기 어려움
 
 테스트하고자 하는 대상이 명학하다면 그 대상에만 집중해서 테스트하는 것이 바람직하다. 한꺼번에 너무 많은것을 몰아서 테스트하면 테스트 수행과정도 복잡해지고, 오류가 발생했을 때 정확한 원인을 찾기가 힘들다.
 
 => 테스트는 가능한 작은 단위로 쪼개서 집중 할 수 있어야 한다.
 
 작은 단위의 코드에 대해 테스트를 수행한 것을 단위 테스트(Unit Test)라고 한다. 여기서 말하는 단위는 정확한 기준이 없다. 다만, 충분히 하나의 관심에 집중해서 효율적으로 테스트할 만한 범위를 단위라고 본다.
 
 UserDaoTest의 특징으로 테스트할 데이터가 코드를 통해 제공되고, 테스트 작업 역시 코드를 통해 자동으로 실행한다는 것이 있었는데, 테스트 값을 직접입력 해야하거나 수동으로 테스트를 수행해야한다면 테스트 수행이 부담이 될 수 있다.
 즉, 테스트는 자동으로 수행되도록 코드로 만들어 두는 것이 중요하고, 복잡성을 줄이기 위해 어플리케이션을 구성하는 클래스 안에 테스트코드를 포함시키기 보다는 별도로 테스트용 클래스를 만들어 운용하는 것이 좋다.
 
 테스트를 이용하면 새로운 기능도 기대한 대로 동작하는지 확인할 수 있을 뿐만 아니라, 기존에 만들어두었던 기능들이 새로운 기능을 추가하느라 수정한 코드에 영향을 받지 않고 정상동작하는지 확인할 수 있기 때문에 지속적인 개선과 점진적인 개발을 위해서 필요하다.
 
 UserDaoTest의 문제점
  * 테스트 결과가 콘솔로 출력되고 이를 확인하는 것은 사람이 직접 해야한다.
  * main 메소드를 매번 실행해야 하고 DAO가 여러개가 되면 테스트를 위해 매 DAO마다 main을 하나씩 실행해야 한다.
  
  2-2 UserDaoTest 개선
  ----------------------------------------------------------------------------
  
  테스트 검증의 자동화
  
  테스트 결과는 성공/실패로 나눌 수 있고, 실패의 경우는 에러가 발생해서 실패/결과가 다르게 나와 실패로 나눌 수 있다.
  에러가 발생해서 실패한 경우는 에러메세지와 호출스택이 출력될 것이기 때문에 성공/결과가 다르게 나와 실패를 조건문으로 구분한다.
  
  => 값을 하나하나 확인할 필요 없이 "테스트 성공" 이라는 메세지가 출력되는지만 확인하면 되게 수정
  
  테스트의 효율적인 수행과 결과 관리
  
  main 메소드를 이용한 테스트 방법만으로는 어플리케이션 규모가 커지고 테스트 개수가 많아지면 테스트를 수행하는 일이 점점 부담이 될 것이다.
  
  => JUnit 이라는 프레임워크를 사용하자. 
 
 기존에 만들었던 main 메소드 테스트는 제어의 흐름을 가지고 있기 때문에 프레임워크에 적용하기에 적합하지 않다. 테스트가 main 메소드로 만들어졌다는 건 제어권을 직접 갖는다는 의미이기 때문이다.
 JUnit 프레임워크가 요구하는 두가지 조건에 맞추어 main 메소드를 활용한 테스트코드를 옮기자. 두가지 조건은 @Test 어노테이션을 적용할 것과 public 접근자를 가질것 이다.
 
 테스트 결과를 검증하는 조건문(if/else if/else)을 JUnit이 제공해주는 assetThat이라는 스태틱 메소드로 변경한다.
 
 마지막으로 main 메소드에 JUnitCore 클래스의 main메소드를 호출해주는 코드를 넣어주면 실행된다.
 => JUintCore.main("패키지명.UserDaoTest");
 
   2-3 개발자를 위한 테스팅 프레임 워크 JUnit
   ----------------------------------------------------------------------------
   